<div class="container">

  <h1>Modifier votre compte</h1>


  <%= simple_form_for(
        resource,
        as: resource_name,
        url: registration_path(resource_name),
        html: { method: :put, class: 'green_form' },
        defaults: {
          wrapper_html: { class: 'form-group' }
        }
    ) do |f| %>

    <div class="form-inputs">
    
      <%= f.error_notification %>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
      <% end %>

        <% if current_member.avatar.url.present? %>
          <%= cl_image_tag current_member.avatar.url, width: 60, height: 60, crop: :fill, radius: 5,  :border => { :width => 4, :color => "#553311" }, :gravity => :face %>
        <% end %>

      <%= f.input :avatar, label: 'Changer d\'image' %>
      
      <%= f.input :email, required: true, autofocus: true %>
      <%= f.input :pseudo %>
      <%= f.input :first_name, label: 'Prénom' %>
      <%= f.input :name, label: 'Nom' %>
      <div class="form-group"
        <%= f.label  "Date de naissance" %> </br>
        <%= f.date_field :birth_date, as: :date, label: "Date de naissance" %> 
      </div>
      <%= f.input :adress, label: 'Adresse' %>
      <%= f.input :zip, label: 'Code postal' %>
      <%= f.input :town, label: 'Ville' %>
      <%= f.input :country, priority: [ "France" ], label: 'Pays' %>

      <hr />

      <%= f.input :bio, label: "Qui êtes-vous en quelques mots " %>

      <hr />
     
      <%= f.input :password, label: 'Nouveau mot de passe', autocomplete: "off", placeholder: "ne rien écrire si vous gardez votre mot de passe" %>
      <%= f.input :password_confirmation, label: 'Confirmation nouveau mot de passe', placeholder: "ne rien écrire si vous gardez votre mot de passe" %>
      <%= f.input :current_password, label: 'Mot de passe actuel', placeholder: "veuillez indiquer votre mot de passe actuel pour confirmer les changements", required: true %>

    </div>
    
    <hr />

    <div class="form-actions btn-group btn-group-justified" role="group">
      <div class="btn-group" role="group">
        <%= f.button :submit, "Enregistrer", class: 'btn btn-default' %>
      </div>
      <div class="btn-group" role="group">
        <%= link_to 'Annuler', session[:request_back], class: 'btn btn-default' %>
      </div>
      <div class="btn-group" role="group">
        <%= link_to 'Supprimer', registration_path(resource_name), class: 'btn btn-danger', data: { confirm: "Etes-vous sûr de vouloir supprimer votre compte ?" }, method: :delete %>
      </div>
    </div>
  <% end %>

</div>

<%= link_to "Retour", :back, class: 'btn btn-default' %>
